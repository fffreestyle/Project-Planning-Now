(this["webpackJsonpproject-planning-now"]=this["webpackJsonpproject-planning-now"]||[]).push([[0],{214:function(e,t,a){e.exports=a(393)},219:function(e,t,a){},220:function(e,t,a){},393:function(e,t,a){"use strict";a.r(t);var r,n=a(0),c=a.n(n),l=a(8),i=a.n(l),o=a(46),m=(a(219),a(24)),u=a(26),s=function(e){var t=e.user;return c.a.createElement("div",null,t.name)},d=(a(220),a(34)),f=Object(d.b)("ADD_DAILY_RECORD_DETAIL"),E=Object(d.b)("DELETE_DAILY_RECORD_DETAIL"),v=Object(d.b)("EDIT_DAILY_RECORD_DETAIL"),p=Object(d.b)("GET_RECORDS"),b=a(27),D=a(405),j=a(400),I=a(394),g=a(396),k=a(399),U=function(e){var t=e.modalTitle,a=e.recordUUID,r=e.visible,n=e.initialValues,l=e.onOk,i=e.handleCancel,o=j.a.TextArea,u=I.a.RangePicker,s=g.a.useForm(),d=Object(m.a)(s,1)[0];return c.a.createElement(k.a,{title:t,visible:r,onOk:function(){d.validateFields().then((function(e){console.log(e);var t=e.recordTitle,r=e.recordDescription,c=Object(m.a)(e.taikingTime,2),i=c[0],o=c[1],u={recordUUID:a,recordDetailUUID:void 0!==n?n.recordDetailUUID:"",projectUUID:null,title:t,description:r,startTime:i,endTime:o,createTime:new Date};l(u),d.resetFields()}))},onCancel:i},c.a.createElement(g.a,{form:d,layout:"vertical",initialValues:n},c.a.createElement(g.a.Item,{name:"recordTitle",label:"Record Title",rules:[{required:!0}]},c.a.createElement(j.a,null)),c.a.createElement(g.a.Item,{name:"recordDescription",label:"Record Description",rules:[{required:!0}]},c.a.createElement(o,null)),c.a.createElement(g.a.Item,{name:"taikingTime",label:"Taking Time",rules:[{required:!0}]},c.a.createElement(u,{picker:"time",format:"HH:mm"}))))},h=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],l=a[1],i=Object(b.c)(),o={recordDetailUUID:e.record.recordDetailUUID,recordTitle:e.record.title,recordDescription:e.record.description,taikingTime:[e.record.startTime,e.record.endTime]};return c.a.createElement("div",{className:"mr-1"},c.a.createElement("a",{onClick:function(){return l(!0)}},c.a.createElement(D.a,null)),c.a.createElement(U,{modalTitle:"Edit Record",recordUUID:e.record.recordUUID,initialValues:o,visible:r,onOk:function(e){i(v(e)),l(!1)},handleCancel:function(){return l(!1)}}))},O=a(404),T=a(406),w=function(e){var t=Object(b.c)();return c.a.createElement("div",null,c.a.createElement(O.a,{placement:"right",title:"\u78ba\u8a8d\u522a\u9664\u55ce?",onConfirm:function(){t(E({recordUUID:e.record.recordUUID,recordDetailUUID:e.record.recordDetailUUID}))},okText:"Yes",cancelText:"No"},c.a.createElement("a",null,c.a.createElement(T.a,null))))},x=a(397),N=a(12),y=a.n(N),R=function(e){var t=e.recordItem;return c.a.createElement("div",null,c.a.createElement(x.a,{size:"small",title:t.title,extra:c.a.createElement("div",{className:"flex"},c.a.createElement(h,{record:t}),c.a.createElement(w,{record:t})),actions:[c.a.createElement("div",null,y()(t.startTime).format("HH:mm")," - ",y()(t.endTime).format("HH:mm"))]},t.description))},C=a(395),P=a(407),S=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],l=a[1],i=Object(b.c)();return c.a.createElement("div",{className:"flex"},c.a.createElement("a",{className:" text-lg",onClick:function(){return l(!0)}},c.a.createElement(P.a,null)),c.a.createElement(U,{modalTitle:"New Record",recordUUID:e.recordUUID,visible:r,onOk:function(e){i(f(e)),l(!1)},handleCancel:function(){return l(!1)}}))},q=function(e){var t=e.workingRecord,a=e.workingRecord.recordItems;return c.a.createElement("div",{className:"border flex-1 m-1"},c.a.createElement("div",{className:"flex text-center border-b"},c.a.createElement("div",{className:" flex-grow flex-shrink"},y()(t.date).format("MM/DD(ddd)")),c.a.createElement("div",{className:"flex-shrink-0 flex-grow-0"},c.a.createElement(S,{recordUUID:e.workingRecord.recordUUID}))),Object(C.a)((function(e,t){return e.startTime.valueOf()-t.startTime.valueOf()}),a).map((function(e){return c.a.createElement(R,{key:e.recordDetailUUID,recordItem:e})})))},L=a(408),_=a(409),A=function(){var e=Object(b.d)((function(e){return e.dailyRecord.dailyRecords})),t=Object(b.c)(),a=Object(n.useState)({startDate:y()().startOf("week").toDate(),endDate:y()().endOf("week").toDate()}),r=Object(m.a)(a,2),l=r[0],i=r[1];Object(n.useEffect)((function(){t(p(l))}),[l]);return c.a.createElement("div",null,c.a.createElement("div",{className:"flex container mx-auto"},c.a.createElement("div",null,c.a.createElement("a",{onClick:function(){i({startDate:y()(l.startDate).subtract(7,"d").toDate(),endDate:y()(l.endDate).subtract(7,"d").toDate()})}},c.a.createElement(L.a,{className:"text-4xl"}))),c.a.createElement("div",{className:"flex-1 text-center text-4xl"},y()(l.startDate).format("MM/DD")," - ",y()(l.endDate).format("MM/DD")),c.a.createElement("div",null,c.a.createElement("a",{onClick:function(){i({startDate:y()(l.startDate).add(7,"d").toDate(),endDate:y()(l.endDate).add(7,"d").toDate()})}},c.a.createElement(_.a,{className:"text-4xl"})))),c.a.createElement("div",{className:"flex container mx-auto"},e.map((function(e,t){return c.a.createElement(q,{key:e.recordUUID,workingRecord:e})}))))},M=function(){return c.a.createElement("div",null,c.a.createElement(A,null))},V=a(160),F=a(89),B=a(50),H=a(39),W=function(e){var t=e.initialValue,a=Object(n.useState)(),r=Object(m.a)(a,2),c=r[0],l=r[1],i=Object(n.useState)(),o=Object(m.a)(i,2),u=o[0],s=o[1],d=Object(n.useState)(1e4),f=Object(m.a)(d,2),E=f[0],v=f[1],p=Object(n.useState)(t),b=Object(m.a)(p,2),D=b[0],j=b[1],I=Object(n.useRef)(),g=E-y()(c).diff(y()(u),"milliseconds")<0?0:E-y()(c).diff(y()(u),"milliseconds");Object(n.useEffect)((function(){window&&I.current&&g<10&&(window.clearInterval(I.current),I.current=void 0)}),[g]),Object(n.useEffect)((function(){D&&!I.current&&v(D)}),[D]);var k=function(){l(void 0),s(void 0),window&&I.current&&(window.clearInterval(I.current),I.current=void 0)};return{startTimer:function(){window&&(s(new Date),I.current=window.setInterval((function(){return l(new Date)}),10))},pauseTimer:function(){k(),v(g)},resetTimer:function(){k(),v(null!==D&&void 0!==D?D:1e4)},setTimer:function(e){j(e)},time:g}},J=a(410),Y=a(411);!function(e){e[e.init=0]="init",e[e.workingTime=1]="workingTime",e[e.restingTime=2]="restingTime",e[e.wait=3]="wait"}(r||(r={}));var G=function(){var e=g.a.useForm(),t=Object(m.a)(e,1)[0],a={workingInterval:.1,restInterval:.1},l=[r.init,r.workingTime,r.wait,r.restingTime],i=Object(n.useState)(0),o=Object(m.a)(i,2),u=o[0],s=o[1],d=W({initialValue:60*a.workingInterval*1e3}),f=d.time,E=d.startTimer,v=d.setTimer,p=(d.pauseTimer,d.resetTimer),b=Object(n.useState)({position:"absolute",top:0,right:0,bottom:0,left:0,transform:""}),D=Object(m.a)(b,2),I=D[0],k=D[1],U=Object(n.useState)(0),h=Object(m.a)(U,2),O=h[0],T=h[1],w=Math.floor(f/1e3),x=function(e){s(Math.floor((e+1)%l.length))};Object(n.useEffect)((function(){k((function(e){return Object(V.a)({},e,{transform:"rotateZ(".concat(360/O*(O-w),"deg)")})})),0===w&&(!function(e){if(l[e]===r.workingTime){var t=new Notification("Resting Time! \u8acb\u6309\u958b\u59cb\u4f11\u606f\u6309\u9215");t.onshow=function(){return setTimeout((function(){return t.close()}),3e3)}}if(l[e]===r.restingTime){var a=new Notification("Working Time! \u8acb\u6309\u958b\u59cb\u5de5\u4f5c\u6309\u9215");a.onshow=function(){return setTimeout((function(){return a.close()}),3e3)}}}(u),x(u))}),[w]);var N=function(){t.validateFields().then((function(e){l[u]===r.init&&(v(60*e.workingInterval*1e3),T(60*e.workingInterval),E(),x(u)),l[u]===r.wait&&(v(60*e.restInterval*1e3),T(60*e.restInterval),E(),x(u))})).catch((function(e){console.log(e)}))};return c.a.createElement("div",{className:"mx-auto container"},c.a.createElement("div",{className:"mx-auto"},c.a.createElement(g.a,{form:t,initialValues:a},c.a.createElement(j.a.Group,null,c.a.createElement(F.a,{gutter:[16,16]},c.a.createElement(B.a,{offset:9},"\u5de5\u4f5c"),c.a.createElement(B.a,null,c.a.createElement(g.a.Item,{noStyle:!0,name:"workingInterval",rules:[{required:!0}]},c.a.createElement(j.a,{type:"number"}))),c.a.createElement(B.a,null,"\u5206\u9418")),c.a.createElement(F.a,{gutter:[16,16]},c.a.createElement(B.a,{offset:9},"\u4f11\u606f"),c.a.createElement(B.a,null,c.a.createElement(g.a.Item,{noStyle:!0,name:"restInterval",rules:[{required:!0}]},c.a.createElement(j.a,{type:"number"}))),c.a.createElement(B.a,null,"\u5206\u9418")))),c.a.createElement(F.a,{gutter:[16,16]},c.a.createElement(B.a,{offset:9},c.a.createElement(H.a,{icon:c.a.createElement(J.a,null),onClick:function(){Notification&&"granted"!==Notification.permission?Notification.requestPermission().then((function(e){"granted"===e?N():alert("\u8acb\u540c\u610f\u7db2\u9801\u901a\u77e5\u756a\u8304\u9418\u63d0\u9192")})):N()},disabled:l[u]===r.workingTime||l[u]===r.restingTime},l[u]===r.wait||l[u]===r.workingTime?"\u958b\u59cb\u4f11\u606f":"\u958b\u59cb\u5de5\u4f5c")),c.a.createElement(B.a,null,c.a.createElement(H.a,{icon:c.a.createElement(Y.a,null),onClick:function(){t.validateFields().then((function(e){s(0),v(60*e.workingInterval*1e3),T(60*e.workingInterval),k((function(e){return Object(V.a)({},e,{transform:"rotateZ(360deg)"})})),p()})).catch((function(e){console.log(e)}))}},"Reset")))),c.a.createElement("article",{className:"rounded-full border-black border-2 h-64 w-64 relative mx-auto clock"},c.a.createElement("div",{style:I},c.a.createElement("div",{className:"seconds"}))))},z=a(398),Z=a(412),K=Object(d.b)("ADD_PROJECT"),$=Object(d.b)("DELETE_PROJECT"),Q=Object(d.b)("EDIT_PROJECT"),X=function(e){var t=Object(b.c)(),a=e.projectUUID;return c.a.createElement("a",{onClick:function(){return t($({projectUUID:a}))},className:"text-xl"},c.a.createElement(T.a,null))},ee=Object(b.b)((function(e){return{projectList:e.projectScheduler}}))((function(e){var t=e.projectList,a=Object(u.h)(),r=(a.path,a.url);return c.a.createElement("div",{className:"container mx-auto"},c.a.createElement(z.b,{header:c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"flex-shrink flex-grow"},"Project List"),c.a.createElement("div",{className:"flex-grow-0 flex-shrink-0"},c.a.createElement(o.b,{to:"".concat(r,"/add"),className:"text-xl"},c.a.createElement(P.a,null)))),bordered:!0,dataSource:t,renderItem:function(e){return c.a.createElement(z.b.Item,{actions:[c.a.createElement(Z.a,null),c.a.createElement(o.b,{className:"text-xl",to:"".concat(r,"/edit/").concat(e.projectUUID),key:"list-loadmore-edit"},c.a.createElement(D.a,null)),c.a.createElement(X,{projectUUID:null===e.projectUUID?"":e.projectUUID})]},c.a.createElement(z.b.Item.Meta,{title:c.a.createElement("div",null,e.name),description:e.name}))}}))})),te=function(){return c.a.createElement("div",{className:"flex"},c.a.createElement(ee,null))},ae=a(401),re=a(158),ne=a(413),ce=function(e){var t=e.id,a=re.a.RangePicker;return c.a.createElement(g.a.List,{name:[t,"subtask"]},(function(e,t){var r=t.add,n=t.remove;return c.a.createElement("div",null,c.a.createElement(g.a.Item,null,c.a.createElement(H.a,{type:"dashed",onClick:function(){r()},style:{width:"60%"}},c.a.createElement(P.a,null)," Add SubTask")),e.map((function(e,t){return c.a.createElement("div",{key:e.key,className:"flex"},c.a.createElement(g.a.Item,{name:[e.name,"title"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input Subtask title"}]},c.a.createElement(j.a,{placeholder:"Subtask title"})),c.a.createElement(g.a.Item,{name:[e.name,"member"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task member"}]},c.a.createElement(j.a,{placeholder:"Task member"})),c.a.createElement(g.a.Item,{name:[e.name,"dateRange"]},c.a.createElement(a,{picker:"week",placeholder:["Task start week","Task finish week"]})),c.a.createElement(ne.a,{className:"dynamic-delete-button",style:{margin:"0 8px"},onClick:function(){n(e.name)}}))})))}))},le=function(){var e=re.a.RangePicker;return c.a.createElement(g.a.List,{name:"task"},(function(t,a){var r=a.add,n=a.remove;return c.a.createElement("div",null,c.a.createElement(g.a.Item,null,c.a.createElement(H.a,{type:"dashed",onClick:function(){r()},style:{width:"60%"}},c.a.createElement(P.a,null)," Add Task")),t.map((function(t,a){return c.a.createElement("div",{key:t.key},c.a.createElement("div",{className:"flex"},c.a.createElement(g.a.Item,{name:[t.name,"title"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task title"}]},c.a.createElement(j.a,{placeholder:"Task title"})),c.a.createElement(g.a.Item,{name:[t.name,"description"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task description"}]},c.a.createElement(j.a,{placeholder:"Task description"})),c.a.createElement(g.a.Item,{name:[t.name,"member"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task member"}]},c.a.createElement(j.a,{placeholder:"Task member"})),c.a.createElement(g.a.Item,{name:[t.name,"dateRange"]},c.a.createElement(e,{picker:"week",placeholder:["Task start week","Task finish week"]})),c.a.createElement(ne.a,{className:"dynamic-delete-button",style:{margin:"0 8px"},onClick:function(){n(t.name)}})),c.a.createElement(ce,{id:t.name}))})))}))},ie=function(e){var t=e.saveSetting,a=e.initialValues,r=re.a.RangePicker,n=g.a.useForm(),l=Object(m.a)(n,1)[0];console.log(a);var i=a?{projectUUID:a.projectUUID,projectName:a.name,description:a.description,totalDateRange:[a.startDate,a.closeDate],task:a.task}:void 0;return c.a.createElement("div",null,c.a.createElement(g.a,{form:l,initialValues:i},c.a.createElement(g.a.Item,{name:"projectName",label:"Project Name",rules:[{required:!0,whitespace:!0,message:"Please input project name"}]},c.a.createElement(j.a,null)),c.a.createElement(g.a.Item,{name:"description",label:"Description"},c.a.createElement(j.a.TextArea,null)),c.a.createElement(g.a.Item,{name:"member",label:"Member",rules:[{required:!0,whitespace:!0,message:"Please input member"}]},c.a.createElement(j.a,null)),c.a.createElement(g.a.Item,{name:"totalDateRange",label:"Total Date Range",rules:[{required:!0,message:"Please input project duration"}]},c.a.createElement(r,{picker:"week"})),c.a.createElement(le,null),c.a.createElement(H.a,{onClick:function(){l.validateFields().then((function(e){var r,n={projectUUID:a?a.projectUUID:null,name:e.projectName,description:e.description,members:[],startDate:e.totalDateRange[0],closeDate:e.totalDateRange[1],task:null===(r=e.task)||void 0===r?void 0:r.map((function(e){var t;return{title:e.title,description:e.description,members:[],startDate:e.dateRange[0],closeDate:e.dateRange[1],subTask:null===(t=e.subtask)||void 0===t?void 0:t.map((function(e){return{title:e.title,members:[],startDate:e.dateRange[0],closeDate:e.dateRange[1]}}))}}))};t(n)})).catch((function(e){console.log(e)}))}},"Save")))},oe=function(){var e=Object(b.c)(),t=Object(u.f)();return c.a.createElement("div",null,c.a.createElement("div",{className:"flex container mx-auto"},c.a.createElement(ie,{saveSetting:function(a){e(K(a)),t.push("/ProjectScheduler")}})))},me=function(){var e=Object(u.g)().projectUUID;console.log(e);var t=Object(b.c)(),a=Object(u.f)(),r=Object(b.d)((function(t){return t.projectScheduler.find((function(t){return t.projectUUID===e}))}));return console.log(r),c.a.createElement("div",{className:"flex container mx-auto"},c.a.createElement(ie,{saveSetting:function(e){t(Q(e)),a.push("/ProjectScheduler")},initialValues:r}))};var ue=function(){var e={name:"GoHmoe"},t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],l=a[1];return c.a.createElement("div",null,c.a.createElement("header",{className:"text-xl max-w-full shadow"},c.a.createElement("div",{className:"h-16 flex"},c.a.createElement("div",{className:"flex items-center"},c.a.createElement("div",{className:"ml-4 mr-4 pr-4 border-r-2"},c.a.createElement("a",{href:"/"},"Project Planing Now")),c.a.createElement(ae.a,{onClick:function(e){l(e.key)},selectedKeys:[r],mode:"horizontal"},c.a.createElement(ae.a.Item,{key:"WorkingRecord"},c.a.createElement(o.b,{className:"",to:"/WorkingRecord"},"WorkingRecord")),c.a.createElement(ae.a.Item,{key:"PomodoroTimer"},c.a.createElement(o.b,{className:"",to:"/PomodoroTimer"},"PomodoroTimer")),c.a.createElement(ae.a.Item,{key:"ProjectScheduler"},c.a.createElement(o.b,{className:"",to:"/ProjectScheduler"},"ProjectScheduler")))))),c.a.createElement("div",{className:" pt-10"},c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/user",render:function(){return c.a.createElement(s,{user:e})}}),c.a.createElement(u.a,{exact:!0,path:"/WorkingRecord",render:function(){return c.a.createElement(M,null)}}),c.a.createElement(u.a,{exact:!0,path:"/PomodoroTimer",render:function(){return c.a.createElement(G,null)}}),c.a.createElement(u.a,{exact:!0,path:"/ProjectScheduler",render:function(){return c.a.createElement(te,null)}}),c.a.createElement(u.a,{exact:!0,path:"/ProjectScheduler/add",render:function(){return c.a.createElement(oe,null)}}),c.a.createElement(u.a,{exact:!0,path:"/ProjectScheduler/edit/:projectUUID",render:function(){return c.a.createElement(me,null)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(38),de=a(414),fe=a(402),Ee=a(403),ve=Object(d.c)({dailyRecords:[]},(function(e){return e.addCase(p,(function(e,t){var a=y()(t.payload.endDate).diff(t.payload.startDate,"d")+1,r=Object(de.a)(0,a).map((function(e){return y()(t.payload.startDate).day(e)}));e.dailyRecords=r.map((function(e){return{recordUUID:Object(Ee.a)(),date:e.toDate(),recordItems:[]}}))})).addCase(f,(function(e,t){var a=e.dailyRecords.find((function(e){return e.recordUUID===t.payload.recordUUID}));if(void 0!==a){var r=Object(fe.a)(t.payload);r.recordDetailUUID=Object(Ee.a)(),a.recordItems.push(r)}})).addCase(v,(function(e,t){var a=e.dailyRecords.find((function(e){return e.recordUUID===t.payload.recordUUID}));if(void 0!==a){var r=a.recordItems.findIndex((function(e){return e.recordDetailUUID===t.payload.recordDetailUUID}));a.recordItems.splice(r,1,t.payload)}})).addCase(E,(function(e,t){var a=e.dailyRecords.find((function(e){return e.recordUUID===t.payload.recordUUID}));if(void 0!==a){var r=a.recordItems.findIndex((function(e){return e.recordDetailUUID===t.payload.recordDetailUUID}));a.recordItems.splice(r,1)}}))})),pe=Object(d.c)([],(function(e){return e.addCase(K,(function(e,t){var a=Object(fe.a)(t.payload);a.projectUUID=Object(Ee.a)(),e.push(a)})).addCase(Q,(function(e,t){var a=e.findIndex((function(e){return e.projectUUID===t.payload.projectUUID}));-1!==a&&e.splice(a,1,t.payload)})).addCase($,(function(e,t){return e.filter((function(e){return e.projectUUID!==t.payload.projectUUID}))}))})),be=Object(se.c)({dailyRecord:ve,projectScheduler:pe}),De=Object(d.a)({reducer:be});i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b.a,{store:De},c.a.createElement(o.a,{basename:"/Project-Planning-Now"},c.a.createElement(ue,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[214,1,2]]]);
//# sourceMappingURL=main.1a1acb8c.chunk.js.map