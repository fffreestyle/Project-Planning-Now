(this["webpackJsonpproject-planning-now"]=this["webpackJsonpproject-planning-now"]||[]).push([[0],{213:function(e,t,a){e.exports=a(392)},218:function(e,t,a){},219:function(e,t,a){},392:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(8),l=a.n(c),o=a(55),i=(a(218),a(25)),m=a(26),d=function(e){var t=e.user;return n.a.createElement("div",null,t.name)},u=(a(219),a(33)),s=Object(u.b)("ADD_DAILY_RECORD_DETAIL"),E=Object(u.b)("DELETE_DAILY_RECORD_DETAIL"),f=Object(u.b)("EDIT_DAILY_RECORD_DETAIL"),p=Object(u.b)("GET_RECORDS"),D=a(30),v=a(405),b=a(399),I=a(393),j=a(395),U=a(398),k=function(e){var t=e.modalTitle,a=e.recordUUID,r=e.visible,c=e.initialValues,l=e.onOk,o=e.handleCancel,m=b.a.TextArea,d=I.a.RangePicker,u=j.a.useForm(),s=Object(i.a)(u,1)[0];return n.a.createElement(U.a,{title:t,visible:r,onOk:function(){s.validateFields().then((function(e){console.log(e);var t=e.recordTitle,r=e.recordDescription,n=Object(i.a)(e.taikingTime,2),o=n[0],m=n[1],d={recordUUID:a,recordDetailUUID:void 0!==c?c.recordDetailUUID:"",projectUUID:null,title:t,description:r,startTime:o,endTime:m,createTime:new Date};l(d),s.resetFields()}))},onCancel:o},n.a.createElement(j.a,{form:s,layout:"vertical",initialValues:c},n.a.createElement(j.a.Item,{name:"recordTitle",label:"Record Title",rules:[{required:!0}]},n.a.createElement(b.a,null)),n.a.createElement(j.a.Item,{name:"recordDescription",label:"Record Description",rules:[{required:!0}]},n.a.createElement(m,null)),n.a.createElement(j.a.Item,{name:"taikingTime",label:"Taking Time",rules:[{required:!0}]},n.a.createElement(d,{picker:"time",format:"HH:mm"}))))},g=function(e){var t=Object(r.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(D.c)(),m={recordDetailUUID:e.record.recordDetailUUID,recordTitle:e.record.title,recordDescription:e.record.description,taikingTime:[e.record.startTime,e.record.endTime]};return n.a.createElement("div",{className:"mr-1"},n.a.createElement("a",{onClick:function(){return l(!0)}},n.a.createElement(v.a,null)),n.a.createElement(k,{modalTitle:"Edit Record",recordUUID:e.record.recordUUID,initialValues:m,visible:c,onOk:function(e){o(f(e)),l(!1)},handleCancel:function(){return l(!1)}}))},O=a(403),h=a(406),T=function(e){var t=Object(D.c)();return n.a.createElement("div",null,n.a.createElement(O.a,{placement:"right",title:"\u78ba\u8a8d\u522a\u9664\u55ce?",onConfirm:function(){t(E({recordUUID:e.record.recordUUID,recordDetailUUID:e.record.recordDetailUUID}))},okText:"Yes",cancelText:"No"},n.a.createElement("a",null,n.a.createElement(h.a,null))))},x=a(396),w=a(22),y=a.n(w),N=function(e){var t=e.recordItem;return n.a.createElement("div",null,n.a.createElement(x.a,{size:"small",title:t.title,extra:n.a.createElement("div",{className:"flex"},n.a.createElement(g,{record:t}),n.a.createElement(T,{record:t})),actions:[n.a.createElement("div",null,y()(t.startTime).format("HH:mm")," - ",y()(t.endTime).format("HH:mm"))]},t.description))},R=a(394),C=a(407),S=function(e){var t=Object(r.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(D.c)();return n.a.createElement("div",{className:"flex"},n.a.createElement("a",{className:" text-lg",onClick:function(){return l(!0)}},n.a.createElement(C.a,null)),n.a.createElement(k,{modalTitle:"New Record",recordUUID:e.recordUUID,visible:c,onOk:function(e){o(s(e)),l(!1)},handleCancel:function(){return l(!1)}}))},P=function(e){var t=e.workingRecord,a=e.workingRecord.recordItems;return n.a.createElement("div",{className:"border flex-1 m-1"},n.a.createElement("div",{className:"flex text-center border-b"},n.a.createElement("div",{className:" flex-grow flex-shrink"},y()(t.date).format("MM/DD(ddd)")),n.a.createElement("div",{className:"flex-shrink-0 flex-grow-0"},n.a.createElement(S,{recordUUID:e.workingRecord.recordUUID}))),Object(R.a)((function(e,t){return e.startTime.valueOf()-t.startTime.valueOf()}),a).map((function(e){return n.a.createElement(N,{key:e.recordDetailUUID,recordItem:e})})))},q=a(408),L=a(409),_=function(){var e=Object(D.d)((function(e){return e.dailyRecord.dailyRecords})),t=Object(D.c)(),a=Object(r.useState)({startDate:y()().startOf("week").toDate(),endDate:y()().endOf("week").toDate()}),c=Object(i.a)(a,2),l=c[0],o=c[1];Object(r.useEffect)((function(){t(p(l))}),[l]);return n.a.createElement("div",null,n.a.createElement("div",{className:"flex container mx-auto"},n.a.createElement("div",null,n.a.createElement("a",{onClick:function(){o({startDate:y()(l.startDate).subtract(7,"d").toDate(),endDate:y()(l.endDate).subtract(7,"d").toDate()})}},n.a.createElement(q.a,{className:"text-4xl"}))),n.a.createElement("div",{className:"flex-1 text-center text-4xl"},y()(l.startDate).format("MM/DD")," - ",y()(l.endDate).format("MM/DD")),n.a.createElement("div",null,n.a.createElement("a",{onClick:function(){o({startDate:y()(l.startDate).add(7,"d").toDate(),endDate:y()(l.endDate).add(7,"d").toDate()})}},n.a.createElement(L.a,{className:"text-4xl"})))),n.a.createElement("div",{className:"flex container mx-auto"},e.map((function(e,t){return n.a.createElement(P,{key:e.recordUUID,workingRecord:e})}))))},A=function(){return n.a.createElement("div",null,n.a.createElement(_,null))},M=a(89),B=a(49),F=a(39),H=function(){var e=j.a.useForm(),t=Object(i.a)(e,1)[0],a={workingInterval:25,restInterval:5},c=Object(r.useState)(!1),l=Object(i.a)(c,2),o=l[0],m=l[1],d=Object(r.useState)(!1),u=Object(i.a)(d,2),s=u[0],E=u[1],f=Object(r.useState)(!1),p=Object(i.a)(f,2),D=p[0],v=p[1],I=Object(r.useState)(0),U=Object(i.a)(I,2),k=U[0],g=U[1],O=Object(r.useState)(0),h=Object(i.a)(O,2),T=h[0],x=h[1],w=Object(r.useState)(a.workingInterval),y=Object(i.a)(w,2),N=y[0],R=y[1],C=Object(r.useState)(a.restInterval),S=Object(i.a)(C,2),P=S[0],q=S[1];Object(r.useEffect)((function(){var e=window.setTimeout((function(){if(o&&s){if(k>60*N)return new Notification("Resting Time!"),console.log("Time to rest"),v(!0),E(!1),void g(0);g((function(e){return e+1})),console.log(k)}}),1e3);return function(){return window.clearTimeout(e)}}),[o,s,k]),Object(r.useEffect)((function(){var e=window.setTimeout((function(){if(o&&D){if(T>60*P)return new Notification("Working Time!"),console.log("Time to work"),v(!1),E(!0),void x(0);x((function(e){return e+1})),console.log(T)}}),1e3);return function(){return window.clearTimeout(e)}}),[o,D,T]);var L=function(){t.validateFields().then((function(e){R(e.workingInterval),q(e.restInterval),E(!0),m(!0)}))};return n.a.createElement("div",null,n.a.createElement(j.a,{form:t,initialValues:a},n.a.createElement(b.a.Group,null,n.a.createElement(M.a,null,"\u6bcf",n.a.createElement(B.a,null,n.a.createElement(j.a.Item,{noStyle:!0,name:"workingInterval",rules:[{required:!0}]},n.a.createElement(b.a,null))),"\u5206\u9418\u63d0\u9192\uff0c\u4e26\u4f11\u606f",n.a.createElement(B.a,null,n.a.createElement(j.a.Item,{noStyle:!0,name:"restInterval",rules:[{required:!0}]},n.a.createElement(b.a,null))),"\u5206\u9418"))),n.a.createElement(F.a,{onClick:function(){Notification&&"granted"!==Notification.permission?Notification.requestPermission().then((function(e){"granted"===e?L():alert("\u8acb\u540c\u610f\u7db2\u9801\u901a\u77e5\u756a\u8304\u9418\u63d0\u9192")})):L()}},"Start"),n.a.createElement(F.a,{onClick:function(){E(!1),v(!1),m(!1),g(0),x(0)}},"Stop"))},W=a(397),J=a(410),V=Object(u.b)("ADD_PROJECT"),Y=Object(u.b)("DELETE_PROJECT"),G=Object(u.b)("EDIT_PROJECT"),z=function(e){var t=Object(D.c)(),a=e.projectUUID;return n.a.createElement("a",{onClick:function(){return t(Y({projectUUID:a}))},className:"text-xl"},n.a.createElement(h.a,null))},K=Object(D.b)((function(e){return{projectList:e.projectScheduler}}))((function(e){var t=e.projectList,a=Object(m.g)(),r=(a.path,a.url);return n.a.createElement("div",{className:"container mx-auto"},n.a.createElement(W.b,{header:n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink flex-grow"},"Project List"),n.a.createElement("div",{className:"flex-grow-0 flex-shrink-0"},n.a.createElement(o.b,{to:"".concat(r,"/add"),className:"text-xl"},n.a.createElement(C.a,null)))),bordered:!0,dataSource:t,renderItem:function(e){return n.a.createElement(W.b.Item,{actions:[n.a.createElement(J.a,null),n.a.createElement(o.b,{className:"text-xl",to:"".concat(r,"/edit/").concat(e.projectUUID),key:"list-loadmore-edit"},n.a.createElement(v.a,null)),n.a.createElement(z,{projectUUID:null===e.projectUUID?"":e.projectUUID})]},n.a.createElement(W.b.Item.Meta,{title:n.a.createElement("div",null,e.name),description:e.name}))}}))})),$=function(){return n.a.createElement("div",{className:"flex"},n.a.createElement(K,null))},Q=a(400),X=a(158),Z=a(411),ee=function(e){var t=e.id,a=X.a.RangePicker;return n.a.createElement(j.a.List,{name:[t,"subtask"]},(function(e,t){var r=t.add;t.remove;return n.a.createElement("div",null,n.a.createElement(j.a.Item,null,n.a.createElement(F.a,{type:"dashed",onClick:function(){r()},style:{width:"60%"}},n.a.createElement(C.a,null)," Add SubTask")),e.map((function(e,t){return n.a.createElement("div",{key:e.key,className:"flex"},n.a.createElement(j.a.Item,{name:[e.name,"title"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input Subtask title"}]},n.a.createElement(b.a,{placeholder:"Subtask title"})),n.a.createElement(j.a.Item,{name:[e.name,"member"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task member"}]},n.a.createElement(b.a,{placeholder:"Task member"})),n.a.createElement(j.a.Item,{name:[e.name,"dateRange"]},n.a.createElement(a,{picker:"week",placeholder:["Task start week","Task finish week"]})))})))}))},te=function(){var e=X.a.RangePicker;return n.a.createElement(j.a.List,{name:"task"},(function(t,a){var r=a.add,c=a.remove;return n.a.createElement("div",null,n.a.createElement(j.a.Item,null,n.a.createElement(F.a,{type:"dashed",onClick:function(){r()},style:{width:"60%"}},n.a.createElement(C.a,null)," Add Task")),t.map((function(t,a){return n.a.createElement("div",{key:t.key},n.a.createElement("div",{className:"flex"},n.a.createElement(j.a.Item,{name:[t.name,"title"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task title"}]},n.a.createElement(b.a,{placeholder:"Task title"})),n.a.createElement(j.a.Item,{name:[t.name,"description"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task description"}]},n.a.createElement(b.a,{placeholder:"Task description"})),n.a.createElement(j.a.Item,{name:[t.name,"member"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input task member"}]},n.a.createElement(b.a,{placeholder:"Task member"})),n.a.createElement(j.a.Item,{name:[t.name,"dateRange"]},n.a.createElement(e,{picker:"week",placeholder:["Task start week","Task finish week"]})),n.a.createElement(Z.a,{className:"dynamic-delete-button",style:{margin:"0 8px"},onClick:function(){c(t.name)}})),n.a.createElement(ee,{id:t.name}))})))}))},ae=function(e){var t=e.saveSetting,a=e.initialValues,r=X.a.RangePicker,c=j.a.useForm(),l=Object(i.a)(c,1)[0];return n.a.createElement("div",null,n.a.createElement(j.a,{form:l,initialValues:a},n.a.createElement(j.a.Item,{name:"projectName",label:"Project Name",rules:[{required:!0,whitespace:!0,message:"Please input project name"}]},n.a.createElement(b.a,null)),n.a.createElement(j.a.Item,{name:"description",label:"Description"},n.a.createElement(b.a.TextArea,null)),n.a.createElement(j.a.Item,{name:"member",label:"Member",rules:[{required:!0,whitespace:!0,message:"Please input member"}]},n.a.createElement(b.a,null)),n.a.createElement(j.a.Item,{name:"totalDateRange",label:"Total Date Range",rules:[{required:!0,message:"Please input project duration"}]},n.a.createElement(r,{picker:"week"})),n.a.createElement(te,null),n.a.createElement(F.a,{onClick:function(){l.validateFields().then((function(e){var r={projectUUID:a?a.projectUUID:null,name:e.projectName,description:e.description,members:[],startDate:e.totalDateRange[0],closeDate:e.totalDateRange[1],task:e.task};t(r),console.log(JSON.stringify(e))})).catch((function(e){console.log(e)}))}},"Save")))},re=function(){var e=Object(D.c)();return n.a.createElement("div",null,n.a.createElement("div",{className:"flex container mx-auto"},n.a.createElement(ae,{saveSetting:function(t){e(V(t))}})))},ne=function(){var e=Object(m.f)().projectUUID;return console.log(e),n.a.createElement("div",null)};var ce=function(){var e={name:"GoHmoe"},t=Object(r.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1];return n.a.createElement("div",null,n.a.createElement("header",{className:"text-xl max-w-full shadow"},n.a.createElement("div",{className:"h-16 flex"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("div",{className:"ml-4 mr-4 pr-4 border-r-2"},n.a.createElement("a",{href:"/"},"Project Planing Now")),n.a.createElement(Q.a,{onClick:function(e){l(e.key)},selectedKeys:[c],mode:"horizontal"},n.a.createElement(Q.a.Item,{key:"WorkingRecord"},n.a.createElement(o.b,{className:"",to:"/WorkingRecord"},"WorkingRecord")),n.a.createElement(Q.a.Item,{key:"PomodoroTimer"},n.a.createElement(o.b,{className:"",to:"/PomodoroTimer"},"PomodoroTimer")),n.a.createElement(Q.a.Item,{key:"ProjectScheduler"},n.a.createElement(o.b,{className:"",to:"/ProjectScheduler"},"ProjectScheduler")))))),n.a.createElement("div",{className:" pt-10"},n.a.createElement(m.c,null,n.a.createElement(m.a,{exact:!0,path:"/user",render:function(){return n.a.createElement(d,{user:e})}}),n.a.createElement(m.a,{exact:!0,path:"/WorkingRecord",render:function(){return n.a.createElement(A,null)}}),n.a.createElement(m.a,{exact:!0,path:"/PomodoroTimer",render:function(){return n.a.createElement(H,null)}}),n.a.createElement(m.a,{exact:!0,path:"/ProjectScheduler",render:function(){return n.a.createElement($,null)}}),n.a.createElement(m.a,{exact:!0,path:"/ProjectScheduler/add",render:function(){return n.a.createElement(re,null)}}),n.a.createElement(m.a,{exact:!0,path:"/ProjectScheduler/edit/:projectUUID",render:function(){return n.a.createElement(ne,null)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=a(38),oe=a(404),ie=a(401),me=a(402),de=Object(u.c)({dailyRecords:[]},(function(e){return e.addCase(p,(function(e,t){var a=y()(t.payload.endDate).diff(t.payload.startDate,"d")+1,r=Object(oe.a)(0,a).map((function(e){return y()(t.payload.startDate).day(e)}));e.dailyRecords=r.map((function(e){return{recordUUID:Object(me.a)(),date:e.toDate(),recordItems:[]}}))})).addCase(s,(function(e,t){var a=e.dailyRecords.find((function(e){return e.recordUUID===t.payload.recordUUID}));if(void 0!==a){var r=Object(ie.a)(t.payload);r.recordDetailUUID=Object(me.a)(),a.recordItems.push(r)}})).addCase(f,(function(e,t){var a=e.dailyRecords.find((function(e){return e.recordUUID===t.payload.recordUUID}));if(void 0!==a){var r=a.recordItems.findIndex((function(e){return e.recordDetailUUID===t.payload.recordDetailUUID}));a.recordItems.splice(r,1,t.payload)}})).addCase(E,(function(e,t){var a=e.dailyRecords.find((function(e){return e.recordUUID===t.payload.recordUUID}));if(void 0!==a){var r=a.recordItems.findIndex((function(e){return e.recordDetailUUID===t.payload.recordDetailUUID}));a.recordItems.splice(r,1)}}))})),ue=Object(u.c)([],(function(e){return e.addCase(V,(function(e,t){var a=Object(ie.a)(t.payload);a.projectUUID=Object(me.a)(),e.push(a)})).addCase(G,(function(e,t){var a=e.findIndex((function(e){return e.projectUUID===t.payload.projectUUID}));-1!==a&&e.splice(a,1,t.payload)})).addCase(Y,(function(e,t){return e.filter((function(e){return e.projectUUID!==t.payload.projectUUID}))}))})),se=Object(le.c)({dailyRecord:de,projectScheduler:ue}),Ee=Object(u.a)({reducer:se});l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(D.a,{store:Ee},n.a.createElement(o.a,{basename:"/project-planning-now"},n.a.createElement(ce,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[213,1,2]]]);
//# sourceMappingURL=main.ca1f4fe5.chunk.js.map